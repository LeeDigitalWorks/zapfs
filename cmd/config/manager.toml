# ZapFS Manager Server Configuration
# All keys use underscores for consistency with CLI flags and environment variables
# Environment variables: ZAPFS_GRPC_PORT, ZAPFS_DEBUG_PORT, etc.

# Network
ip = "0.0.0.0"
grpc_port = 8050
debug_port = 8055
admin_port = 8060  # Admin HTTP port for IAM management

# TLS (optional)
cert_file = ""
key_file = ""

# Logging
log_level = "info"

# Raft Configuration
node_id = ""
raft_dir = "/tmp/raft"
raft_addr = ""          # Raft peer address (default: ip:grpc_port+1)
bootstrap = false       # Set true for first node to bootstrap cluster
bootstrap_expect = 1    # Expected number of servers in cluster
join = ""               # gRPC address of leader to join (e.g., "manager-1:8050")
leader_timeout = "5s"   # Time to wait for leader election

# Regional
region_id = "default"

# Placement Defaults
# Default replication factor when not specified per-request.
# With 1 file server, only 1 replica is possible regardless of this setting.
default_num_replicas = 3

# =============================================================================
# Multi-Region Configuration (Enterprise Feature)
# =============================================================================
# Enables cross-region bucket cache synchronization and forwarding of bucket
# mutations to the primary region. Requires FeatureMultiRegion license.
#
# Uncomment and configure for multi-region deployments:
#
# [region]
# name = "us-east-1"                           # This region's identifier
# primary_regions = ["us-east-1", "us-west-2"] # Failover priority list
#
# [[region.peers]]
# name = "us-west-2"
# manager_addresses = ["manager-1.us-west-2.example.com:8050", "manager-2.us-west-2.example.com:8050"]
# s3_endpoint = "https://s3.us-west-2.example.com"  # For cross-region replication
#
# [[region.peers]]
# name = "eu-west-1"
# manager_addresses = ["manager-1.eu-west-1.example.com:8050"]
# s3_endpoint = "https://s3.eu-west-1.example.com"  # For cross-region replication
#
# [region.cache]
# sync_interval = 30          # Seconds between cache syncs from primary
# cross_region_timeout = 5000 # Timeout for cross-region calls (milliseconds)
