# Mockery v3 Configuration
# https://vektra.github.io/mockery/latest/configuration/
#
# Generate mocks: make mocks
# Install mockery: go install github.com/vektra/mockery/v3@latest
#
# Template variables available:
#   {{.InterfaceDir}}    - Directory containing the interface
#   {{.InterfaceName}}   - Name of the interface
#   {{.SrcPackageName}}  - Source package name
#   {{.Mock}}            - "Mock" prefix

all: false
dir: "mocks/{{.SrcPackageName}}"
filename: "mock_{{.InterfaceName | lower}}.go"
structname: "Mock{{.InterfaceName}}"
pkgname: "mocks"
formatter: goimports
template: testify
force-file-write: true
include-auto-generated: true
template-data:
  unroll-variadic: true
packages:
  # gRPC Service Clients (from proto-generated code)
  github.com/LeeDigitalWorks/zapfs/proto/manager_pb:
    interfaces:
      ManagerServiceClient:

  github.com/LeeDigitalWorks/zapfs/proto/metadata_pb:
    interfaces:
      MetadataServiceClient:

  github.com/LeeDigitalWorks/zapfs/proto/file_pb:
    interfaces:
      FileServiceClient:

  github.com/LeeDigitalWorks/zapfs/proto/iam_pb:
    interfaces:
      IAMServiceClient:

  # IAM Package - credential storage and policy evaluation
  github.com/LeeDigitalWorks/zapfs/pkg/iam:
    config:
      all: false
    interfaces:
      CredentialStore:
      # PolicyStore and GroupStore have inpackage mocks for internal tests
      PolicyStore:
        config:
          inpackage: true
          dir: "pkg/iam"
          pkgname: "iam"
          filename: mock_policystore_test.go
      GroupStore:
        config:
          inpackage: true
          dir: "pkg/iam"
          pkgname: "iam"
          filename: mock_groupstore_test.go

  # Metadata DB Package - database layer
  github.com/LeeDigitalWorks/zapfs/pkg/metadata/db:
    config:
      all: false
    interfaces:
      DB:
      ObjectStore:
      BucketStore:
      MultipartStore:
      VersionStore:
      ACLStore:
      PolicyStore:
      CORSStore:
      WebsiteStore:
      TaggingStore:
      EncryptionStore:
      LifecycleStore:
      ObjectLockStore:
      TxStore:

  # Metadata Filter Package - request processing filters
  github.com/LeeDigitalWorks/zapfs/pkg/metadata/filter:
    config:
      all: false
    interfaces:
      Filter:
      PolicyStore:
      ACLStore:
      BucketChecker:
      TierStore:

  # Metadata Client Package - service client interfaces
  github.com/LeeDigitalWorks/zapfs/pkg/metadata/client:
    config:
      all: false
    interfaces:
      Manager:
      File:

  # Metadata Service Package - business logic layer
  github.com/LeeDigitalWorks/zapfs/pkg/metadata/service/object:
    config:
      all: false
    interfaces:
      Service:
      CRRHook:

  github.com/LeeDigitalWorks/zapfs/pkg/metadata/service/bucket:
    config:
      all: false
    interfaces:
      Service:

  github.com/LeeDigitalWorks/zapfs/pkg/metadata/service/multipart:
    config:
      all: false
    interfaces:
      Service:
      Storage:

  github.com/LeeDigitalWorks/zapfs/pkg/metadata/service/config:
    config:
      all: false
    interfaces:
      Service:
      BucketStore:

  github.com/LeeDigitalWorks/zapfs/pkg/metadata/service/encryption:
    config:
      all: false
    interfaces:
      KMSProvider:

  # Cache Package - caching layer
  github.com/LeeDigitalWorks/zapfs/pkg/cache:
    config:
      all: false
    interfaces:
      BucketCacheClient:

  # Storage Package - storage backends
  github.com/LeeDigitalWorks/zapfs/pkg/storage/store:
    config:
      all: false
    interfaces:
      Store:

  github.com/LeeDigitalWorks/zapfs/pkg/storage/placer:
    config:
      all: false
    interfaces:
      Placer:

  github.com/LeeDigitalWorks/zapfs/pkg/storage/ec:
    config:
      all: false
    interfaces:
      ErasureCoder:

  # Types Package - core type interfaces
  github.com/LeeDigitalWorks/zapfs/pkg/types:
    config:
      all: false
    interfaces:
      BackendStorage:

  # Manager Package - cluster management
  github.com/LeeDigitalWorks/zapfs/pkg/manager:
    config:
      all: false
    interfaces:
      CredentialNotifier:

  # Task Queue - core interfaces
  github.com/LeeDigitalWorks/zapfs/pkg/taskqueue:
    config:
      all: false
    interfaces:
      Queue:
      Handler:

  # Usage Package - usage tracking and metering
  github.com/LeeDigitalWorks/zapfs/pkg/usage:
    config:
      all: false
    interfaces:
      Store:

